<!DOCTYPE html>
<html>

<head>
	<!-- include Synology SSO js -->
	<script src="https://lds.site.unnamed.games/webman/sso/synoSSO-1.0.0.js"></script>
</head>

<body>

	<script>
		/** Display login/logout button.
		* Use a html element with id button
		* @param logged boolean, are we logged ?
		*/
		function setButton(logged) {
			if (logged) {
				document.getElementById('button').innerHTML = '<button onclick="SYNOSSO.logout()">Logout</button>';
				
			} else {
				document.getElementById('button').innerHTML = '<button onclick="SYNOSSO.login()">Login</button>';
			}
		}
		
		/** Callback for SSO.
		* Called by init() and login()
		* @param reponse the JSON returned by SSO. See Syno SSO Dev Guide.
		*/
		function authCallback(reponse) {
			console.log(JSON.stringify(reponse));
			if (reponse.status == 'login') {
				console.log('logged');
				setButton(true);
			}
			else {
				console.log('not logged ' + reponse.status);
				setButton(false);
			}
		}
		
		SYNOSSO.init({
			oauthserver_url: "https://lds.site.unnamed.games",
			app_id: "d70dbd63b9f7841eb30f6ee517455411",
			redirect_uri: "https://unnamed.games/jwt", //no idea what this is :)
			callback: authCallback
		});
	</script>

	<h1> Syno SSO test</h1>

	<p id='button'></p>

</body>

</html>